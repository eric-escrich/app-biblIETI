
<div class="headerContainer flex flex-col items-center justify-center text-center">
    <header class="w-4/5">
        <div class="flex flex-col items-center justify-center ">
            <a [routerLink]="['/inici']"><h1>BIBLIOTECA MARI CARMEN BRITO</h1></a>
        </div>
    </header>
</div>

@if (item) {
    <div class="flex flex-col p-10">
        <h2>{{ item.title }}</h2>
        <p>{{ item.more_details.author }}</p>
        <p>{{ item.more_details.edition_date }}</p>
        <p>Lisístrata (en grec Λυσιστράτη "la que dissol l'exèrcit") és una comèdia de
            Aristòfanes, autor de la Grècia Clàssica. Les comèdies d'Aristòfanes són d'un gran
            interès històric, a més del seu valor literari, ja que gràcies a elles es pot
            conèixer la vida quotidiana dels atenesos. L'autor va protestar sovint contra
            la guerra. A les seves obres Lisístrata, Los acarnienses i La paz, va defensar les solucions
            pacífiques contra els demagogs que impulsaven el poble a la guerra. A Lisístrata
            la vaga sexual de les dones. També l'obra ha estat interpretada com una
            ridiculització de la dona.</p>
            

        <div>
            <h3>A la biblioteca</h3>
            <div class="card">
                <p-table [value]="itemCopis">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>ID</th>
                            <th>Estat</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item>
                        <tr>
                            <td>{{ item.id }}</td>
                            @if (item.status == 'Available') {
                                <td>Disponible</td>
                            } @else {
                                <td>No disponible</td>
                            }
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
                
        <div class="flex flex-row gap-x-4 mt-10">
            <p-button severity="min" [routerLink]="['/']">Retorna</p-button>
            <p-button severity="fill-rounded" (click)="toggleFormulario()">Reservar</p-button>
        </div>
        @if (role && (role == Role.BIBLIO || role == Role.ADMIN)) {
            <h3>PRESTECS</h3>
            
            <form (ngSubmit)="sendForm()" method="post" class="flex flex-col gap-y-4">
                <p-dropdown name="item" [options]="availableItems" [(ngModel)]="selectedItem" optionLabel="id" placeholder="Selecciona un item"></p-dropdown>
                <p-autoComplete
                    name="user"
                    [(ngModel)]="searchEmail"
                    [suggestions]="users"
                    (input)="onFilterChange()"
                    [minLength]="3"
                    field="email"
                ></p-autoComplete>
                <div class="flex-auto">
                    <label for="icondisplay" class="font-bold block mb-2">Fecha de retorno</label>
                    <p-calendar name="date" [(ngModel)]="fechaReserva" [iconDisplay]="'input'" [showIcon]="true" inputId="icondisplay"></p-calendar>
                </div>
                <p-button severity="fill-rounded" type="submit">Reservar</p-button>
            </form>
            
        }
    </div>
}
